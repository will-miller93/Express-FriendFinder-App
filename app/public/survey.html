<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- compiled and minified css from materialize -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- materialize icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <title> Friend Finder </title>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col l12">
                <h1>Survey Questions</h1>
                <br>
            </div>
        </div>
        <div class="row">
            <form class="col l12">
                <h3>
                    <bold>About You</bold>
                </h3>
                <label for="name">Name</label>
                <input placeholder="Your Full Name Here" id="name" type="text" class="validate">
                <br>
                <label for="link">Link to photo image</label>
                <input placeholder="put link here" id="link" type="text" class="validate">
            </form>
        </div>
        <div class="row">
            <div class="col l12">
                <h3>Question One!</h3>
                <p>Your mind is always buzzing with unexplored ideas and plans.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesOne">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Two!</h3>
                <p>Generally speaking, you rely more on your experience than your imagination.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesTwo">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Three!</h3>
                <p>You find it easy to stay relaxed and focused under pressure.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesThree">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Four!</h3>
                <p>You rarely do something out of sheer curiosity</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesFour">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Five!</h3>
                <p>People can rarely upset you.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesFive">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Six!</h3>
                <p>It is often too difficult for you to relate to other peoples feelings.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesSix">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Seven!</h3>
                <p>In a discussion, truth is more important than others sensitivites.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesSeven">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Eight!</h3>
                <p>You rarely get carried away by fantasies and ideas.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesEight">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Nine!</h3>
                <p>You think everone's views should be respected regardless of whether they are supported by facts or not.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesNine">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <h3>Question Ten!</h3>
                <p>You feel more energetic after spending time with a group of people.</p>
                <label>Select an Option</label>
                <form>
                <span>
                <div class="input-field">
                    <select id="quesTen">
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1"> 1 (Strongly Disagree)</option>
                        <option value="2"> 2 (Disagree)</option>
                        <option value="3"> 3 (Neutral)</option>
                        <option value="4"> 4 (Agree)</option>
                        <option value="5"> 5 (Strongly Agree)</option>
                    </select>
                </div>
                </span>
                </form>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col l12">
                <button data-target="modal1" class="waves-effect waves-light btn modal-trigger" id="submitAnswers">Submit
                    <i class="material-icons left">subdirectory_arrow_right</i>
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col l12">
                <footer class="page-footer blue-grey darken-1">
                    <div class="footer-copyright white-text">
                        <div class="container">
                            <a class="#" href="/api/friends" id="friendsAPI">Friends API</a> 
                            <a> | </a>
                            <a class="#" href="https://github.com/will-miller93/Express-FriendFinder-App" id="gitHub">Github Repo</a>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <div id="modal1" class="modal">
        <div class="modal-content">
            <div class="container">
                <div class="row">
                    <h3> Your new friend </h5>
                    <div class="divider"></div>
                    <h4 id="bestFriendName"></h4>
                    <img id="bestFriendImg" src="">
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        // this should initialize the select fields. //
        $(document).ready(function () {
            // initializes the select dropdowns.
            $('select').material_select();
            // initializes the modal
            $('.modal').modal({
                dismissable: true,
                opacity: .5,
                inDuration: 300,
                outDuration: 200,
                startingTop: '4%',
                endingTop: '10%'
            });
            // on click event for the submit button
            $("#submitAnswers").on('click', function() {
                event.preventDefault();
            
                function validateForm() {
                    var valid = true;
                    $("form-control").each(function(){
                        if($(this).val() === "") {
                            valid = false;
                        }
                    });
                    $("select").each(function() {
                        if($(this).val() === "") {
                            valid = false;
                        }
                        else {valid = true;}
                    });
                    return valid;
                }
            
                if (validateForm() === true) {
                        var userInput = {
                        name: $("#name").val().trim(),
                        img: $("#link").val().trim(),
                        scores: [
                            $("#quesOne").val().trim(),
                            $("#quesTwo").val().trim(),
                            $("#quesThree").val().trim(),
                            $("#quesFour").val().trim(),
                            $("#quesFive").val().trim(),
                            $("#quesSix").val().trim(),
                            $("#quesSeven").val().trim(),
                            $("#quesEight").val().trim(),
                            $("#quesNine").val().trim(),
                            $("#quesTen").val().trim()

                        ]
                    };
                    // adds user input to array in the friendsData API and opens the modal
                    $.post("/api/friends", userInput, function(data) {
                        $("#bestFriendName").text(data.bestFriendName.name);
                        $("bestFriendImg").attr("src", data.bestFriendImg.photo);
                        $("#modal1").modal("open");
                    })
                }
                validateForm(); 
            });
        });
    </script>

</body>

</html>